{"ast":null,"code":"const express = require('express');\n\nconst fetch = require('node-fetch');\n\nconst app = express();\nconst port = process.env.PORT || 3001;\nconst API_KEY = 'aa66f5edf4774bb5bbeb2d07900c9b16'; // Replace with your News API key\n\napp.get('/api/news', async (req, res) => {\n  try {\n    const currentDate = new Date();\n    const end = `${currentDate.getFullYear()}-${currentDate.getMonth() + 1}-${currentDate.getDate()}`;\n    const start = new Date(currentDate);\n    start.setDate(currentDate.getDate() - 30); // 30 days in the past\n\n    const begin = `${start.getFullYear()}-${start.getMonth() + 1}-${start.getDate()}`;\n    const query = `(%22coffee%20industry%22%20OR%20%22coffee%20market%22%20OR%20%22coffee%20trade%22%20OR%20%22coffee%20production%22%20OR%20%22coffee%20economics%22%20OR%20%22specialty%20coffee%20business%22%20OR%20%22coffee%20farmers%22%20OR%20%22coffee%20supply%20chain%22%20OR%20%22coffee%20prices%22%20OR%20%22coffee%20demand%22)%20AND%20(%22arabica%22%20OR%20%22robusta%22)`;\n    const API_URL = `https://newsapi.org/v2/everything?q=${query}&from=${begin}&to=${end}&sortBy=relevancy&apiKey=${API_KEY}&pageSize=10&language=en`;\n    const response = await fetch(API_URL);\n    const data = await response.json();\n\n    if (data.status === 'ok' && data.articles) {\n      res.json(data.articles);\n    } else {\n      throw new Error('Failed to fetch news data');\n    }\n  } catch (error) {\n    console.error(error);\n    res.status(500).json({\n      error: 'Internal server error'\n    });\n  }\n});\napp.listen(port, () => {\n  console.log(`Server is running on port ${port}`);\n});","map":{"version":3,"sources":["/workspaces/Glocafe1/src/components/Home/newsbackend.js"],"names":["express","require","fetch","app","port","process","env","PORT","API_KEY","get","req","res","currentDate","Date","end","getFullYear","getMonth","getDate","start","setDate","begin","query","API_URL","response","data","json","status","articles","Error","error","console","listen","log"],"mappings":"AAAA,MAAMA,OAAO,GAAGC,OAAO,CAAC,SAAD,CAAvB;;AACA,MAAMC,KAAK,GAAGD,OAAO,CAAC,YAAD,CAArB;;AAEA,MAAME,GAAG,GAAGH,OAAO,EAAnB;AACA,MAAMI,IAAI,GAAGC,OAAO,CAACC,GAAR,CAAYC,IAAZ,IAAoB,IAAjC;AAEA,MAAMC,OAAO,GAAG,kCAAhB,C,CAAoD;;AAEpDL,GAAG,CAACM,GAAJ,CAAQ,WAAR,EAAqB,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AACvC,MAAI;AACF,UAAMC,WAAW,GAAG,IAAIC,IAAJ,EAApB;AACA,UAAMC,GAAG,GAAI,GAAEF,WAAW,CAACG,WAAZ,EAA0B,IAAGH,WAAW,CAACI,QAAZ,KAAyB,CAAE,IAAGJ,WAAW,CAACK,OAAZ,EAAsB,EAAhG;AACA,UAAMC,KAAK,GAAG,IAAIL,IAAJ,CAASD,WAAT,CAAd;AACAM,IAAAA,KAAK,CAACC,OAAN,CAAcP,WAAW,CAACK,OAAZ,KAAwB,EAAtC,EAJE,CAIyC;;AAC3C,UAAMG,KAAK,GAAI,GAAEF,KAAK,CAACH,WAAN,EAAoB,IAAGG,KAAK,CAACF,QAAN,KAAmB,CAAE,IAAGE,KAAK,CAACD,OAAN,EAAgB,EAAhF;AAEA,UAAMI,KAAK,GAAI,0WAAf;AACA,UAAMC,OAAO,GAAI,uCAAsCD,KAAM,SAAQD,KAAM,OAAMN,GAAI,4BAA2BN,OAAQ,0BAAxH;AAEA,UAAMe,QAAQ,GAAG,MAAMrB,KAAK,CAACoB,OAAD,CAA5B;AACA,UAAME,IAAI,GAAG,MAAMD,QAAQ,CAACE,IAAT,EAAnB;;AAEA,QAAID,IAAI,CAACE,MAAL,KAAgB,IAAhB,IAAwBF,IAAI,CAACG,QAAjC,EAA2C;AACzChB,MAAAA,GAAG,CAACc,IAAJ,CAASD,IAAI,CAACG,QAAd;AACD,KAFD,MAEO;AACL,YAAM,IAAIC,KAAJ,CAAU,2BAAV,CAAN;AACD;AACF,GAlBD,CAkBE,OAAOC,KAAP,EAAc;AACdC,IAAAA,OAAO,CAACD,KAAR,CAAcA,KAAd;AACAlB,IAAAA,GAAG,CAACe,MAAJ,CAAW,GAAX,EAAgBD,IAAhB,CAAqB;AAAEI,MAAAA,KAAK,EAAE;AAAT,KAArB;AACD;AACF,CAvBD;AAyBA1B,GAAG,CAAC4B,MAAJ,CAAW3B,IAAX,EAAiB,MAAM;AACrB0B,EAAAA,OAAO,CAACE,GAAR,CAAa,6BAA4B5B,IAAK,EAA9C;AACD,CAFD","sourcesContent":["const express = require('express');\nconst fetch = require('node-fetch');\n\nconst app = express();\nconst port = process.env.PORT || 3001;\n\nconst API_KEY = 'aa66f5edf4774bb5bbeb2d07900c9b16'; // Replace with your News API key\n\napp.get('/api/news', async (req, res) => {\n  try {\n    const currentDate = new Date();\n    const end = `${currentDate.getFullYear()}-${currentDate.getMonth() + 1}-${currentDate.getDate()}`;\n    const start = new Date(currentDate);\n    start.setDate(currentDate.getDate() - 30); // 30 days in the past\n    const begin = `${start.getFullYear()}-${start.getMonth() + 1}-${start.getDate()}`;\n\n    const query = `(%22coffee%20industry%22%20OR%20%22coffee%20market%22%20OR%20%22coffee%20trade%22%20OR%20%22coffee%20production%22%20OR%20%22coffee%20economics%22%20OR%20%22specialty%20coffee%20business%22%20OR%20%22coffee%20farmers%22%20OR%20%22coffee%20supply%20chain%22%20OR%20%22coffee%20prices%22%20OR%20%22coffee%20demand%22)%20AND%20(%22arabica%22%20OR%20%22robusta%22)`;\n    const API_URL = `https://newsapi.org/v2/everything?q=${query}&from=${begin}&to=${end}&sortBy=relevancy&apiKey=${API_KEY}&pageSize=10&language=en`;\n\n    const response = await fetch(API_URL);\n    const data = await response.json();\n\n    if (data.status === 'ok' && data.articles) {\n      res.json(data.articles);\n    } else {\n      throw new Error('Failed to fetch news data');\n    }\n  } catch (error) {\n    console.error(error);\n    res.status(500).json({ error: 'Internal server error' });\n  }\n});\n\napp.listen(port, () => {\n  console.log(`Server is running on port ${port}`);\n});\n"]},"metadata":{},"sourceType":"module"}